//tealium universal tag - utag.666 ut4.0.202307270536, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var amzn=window.amzn||[];try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.queue=[];u.clearEmptyKeys=function(object){Object.keys(object).forEach(function(key){if(object[key]===''||object[key]===undefined){delete object[key];}});return object;};u.forceBoolean=function(input){var bool;if(typeof input==='boolean'){bool=input;}else if(typeof input==='string'&&input.toLowerCase()==='true'){bool=true;}else{bool=false;}
return bool;};u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.loaderCallback=function(){u.initialized=true;var ids=u.data.ids.split(' ').join('');amzn("setRegion",u.data.region);amzn("addTag",ids);if(u.data.event_queue.length>0){u.data.event_queue.forEach(function(event_name){amzn("trackEvent",event_name,u.data[event_name]);});}};u.map={"event_name":"auto_page_tracking,auto_purchase_tracking","event_name:cart_add":"AddToCart","page_type:Order-Confirmation":"Purchase","page_type:Cart":"Checkout","page_type:ShoppingCart":"Checkout","order_id":"order_id","product_sku_short":"Checkout.product_sku,Purchase.product_sku,AddToCart.product_sku,PageView.product_sku","product_category":"Checkout.product_category,PageView.product_category,AddToCart.product_category","product_list_price":"Checkout.product_price,Purchase.product_price","product_quantity":"Checkout.product_quantity,Purchase.product_quantity","order_subtotal":"Purchase.order_subtotal","order_currency":"Purchase.order_currency"};u.extend=[];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB('send:666');utag.DB(data_layer);var a,b,c,d,e,f,g,h,query_params;a=utag_event;b=data_layer;u.data={base_url:'https://c.amazon-adsystem.com/aat/amzn.js',region:'NA',ids:'014518db-5ee1-4e58-8bad-cd4a16323325',auto_page_tracking:'true',auto_purchase_tracking:'true',order_id:'',event_queue:[],custom:{}};utag.DB('send:666:EXTENSIONS');utag.DB(data_layer);query_params=[];Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==''){var destinations=u.map[mapping_key].split(',');destinations.forEach(function(parameter){if(u.data.hasOwnProperty(parameter)||parameter.indexOf('.')>-1){u.map_func(parameter.split('.'),u.data,data_layer[mapping_key]);}});}else{var event_destinations=mapping_key.split(':');if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(','));}}}});utag.DB('send:666:MAPPINGS');utag.DB(u.data);var eCommerceMapping=[{eCommerceData:b._corder,name:'order_id',isArray:false},];eCommerceMapping.forEach(function(dataObject){if(!dataObject.isArray){u.data[dataObject.name]=u.data[dataObject.name]||dataObject.eCommerceData||'';}else if(u.data[dataObject.name].length===0&&dataObject.eCommerceData!==undefined&&dataObject.isArray){u.data[dataObject.name]=dataObject.eCommerceData.slice(0);}});if(!u.data.ids){utag.DB(u.id+': Tag not fired: Required attribute Tag IDs not populated');return;}
if(!u.data.region){utag.DB(u.id+': Endpoint does not exist, please check your region configuration!');}
if(u.initialized){u.loaderCallback();}else{if(u.forceBoolean(u.data.auto_page_tracking)){u.data.event_queue.push('Pageview');}
if(u.forceBoolean(u.data.auto_purchase_tracking)&&u.data.order_id){u.data.event_queue.push('Purchase');}
if(!u.scriptrequested){u.scriptrequested=true;utag.ut.loader({'type':'script','src':u.data.base_url,'cb':u.loaderCallback,'loc':'script','id':'utag_666','attrs':{}});}}
utag.DB('send:666:COMPLETE');}};utag.o[loader].loader.LOAD(id);}('666','logitech.main'));}catch(error){utag.DB(error);}
